<section>
    <h2 style="font-family: Roboto" class="text-center">Products</h2>

    <div class="container-fluid ">
        <div class="row justify-content-center ">
            <div class="col-3">
                <form method="get" action="/search">
                <div class="input-group">
                    <input type="search" name="search" class="form-control rounded" placeholder="Search" aria-label="Search" aria-describedby="search-addon" />
                    <button type="submit" class="btn btn-outline-primary">search</button>
                </div>
                </form>
            </div>

        </div>
    </div>
    <br>


    <div class="container">


        <div class="row">




            <div th:if="${user.getAppUserRole().name=='ADMIN'}" class="col-12">
                <a  href="/products/farmer" class="btn btn-block btn-warning add-product-btn">
                    My products
                </a>
            </div>
            <div th:if="${user.getAppUserRole().name=='ADMIN'}" class="col-4">
                <a  href="/products/add" class="btn btn-block btn-success add-product-btn">
                    Add new product
                </a>
            </div>


        </div>

    </div>
    <br>

    <div class="container table-bordered ">
        <br>


        <div  class="row">

            <div th:each="product : ${products}" class="col-4">
                <div class="card " style="width: 18rem;">
                    <img class="card-img-top table-bordered" src="data:image/jpeg;base64,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" alt="Card image cap">
                    <div class="card-body">
                        <h5 th:text="${product.getName()}" class="card-title"></h5>
                        <p  th:text="${product.getPrice()}" class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                        <p  th:text="${product.getQuantity()}" class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>


                        <div class="container "><div class="row">
                            <div class="col-3 ">
                                <form th:action="@{'/products/delete/{id}' (id=${product.getId()})}"
                                      th:method="POST">
                                    <button th:if="${product.getOwnerId()==user.getId()}" type="submit"
                                            class="btn btn-sm btn-danger delete-product">
                                        <i class="fa fa-trash">Delete</i>
                                    </button>
                                </form>


                        </div >
                            <div class="col-2">
                            <form th:action="@{'/products/edit/{id}' (id=${product.getId()})}"
                                  th:method="GET">
                                <button th:if="${product.getOwnerId()==user.getId()}" type="submit"
                                        class="btn btn-sm btn-danger delete-product">
                                    <i class="fa fa-trash">Edit</i>
                                </button>
                            </form>
                            </div>
                            <div class="col-7">
                            <form  th:if="${product.getOwnerId()!=user.getId()}" th:action="@{'/orders/add-product/{productId}/{userId}' (productId=${product.getId()}, userId=${user.getId})}"
                                  th:method="GET"
                                  sec:authorize="isAuthenticated()">
                                <button type="submit"
                                        class="btn btn-sm btn-primary">
                                    <i class="fa fa-trash">Add to order</i>
                                </button>
                            </form>
                            </div>
                        </div></div>


                    </div>

                </div>


            </div>
        </div>


        <br>
    </div>

    <br>
    <br>




</section>


<!--<section>
<div>
    <div th:each="product : ${products}" class="card">
        <div class="container">
            <h4 th:text="${product.getName()}"><b></b></h4>
            <h3 th:text="${product.getPrice()}"></h3>
            <h3 th:text="${product.getQuantity()}"></h3>
            <div class="buttons">
                <form th:action="@{'/products/delete/{id}' (id=${product.getId()})}"
                      th:method="POST">
                    <button type="submit"
                            class="btn btn-sm btn-danger delete-product">
                        <i class="fa fa-trash">Delete</i>
                    </button>
                </form>
                <form th:action="@{'/products/edit/{id}' (id=${product.getId()})}"
                      th:method="GET">
                    <button type="submit"
                            class="btn btn-sm btn-danger delete-product">
                        <i class="fa fa-trash">Edit</i>
                    </button>
                </form>
                <form th:action="@{'/orders/add-product/{productId}/{userId}' (productId=${product.getId()}, userId=${user.getId})}"
                      th:method="GET"
                      sec:authorize="isAuthenticated()">
                    <button type="submit"
                            class="btn btn-sm btn-primary">
                        <i class="fa fa-trash">Add to order</i>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="card">
    <div class="container">
        <div class="" >
            <a href="/products/add" class="btn btn-block btn-dark add-product-btn">
                Add new product
            </a>
        </div>
    </div>

    <div class="container">
        <div>
            <a href="/logout" class="btn btn-block ">
                LogOut
            </a>
        </div>
    </div>
</div>
</section>-->
